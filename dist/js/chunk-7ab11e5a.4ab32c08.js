(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ab11e5a"],{"345a":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"u-user"},[e.item?i("el-form",{attrs:{"label-position":"left","label-suffix":":","label-width":"100px"}},[i("el-form-item",{attrs:{label:"ID"}},[i("span",[e._v(e._s(e.item.id))])]),i("el-form-item",{attrs:{label:"账号"}},[i("span",[e._v(e._s(e.item.account))])]),i("el-form-item",{attrs:{label:"昵称"}},[i("span",[e._v(e._s(e.item.nickName))])]),i("el-form-item",{attrs:{label:"身份"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.item.identity,callback:function(t){e.$set(e.item,"identity",t)},expression:"item.identity"}},e._l(e.dict.user.identity,(function(e){return i("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1),i("el-form-item",{attrs:{label:"状态"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.item.state,callback:function(t){e.$set(e.item,"state",t)},expression:"item.state"}},e._l(e.dict.user.state,(function(e){return i("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1),i("el-form-item",{attrs:{label:"个人网站"}},[i("el-input",{attrs:{type:"url",placeholder:"个人网站",clearable:"",maxlength:"200","show-word-limit":""},model:{value:e.item.url,callback:function(t){e.$set(e.item,"url",t)},expression:"item.url"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:e.edit}},[e._v("修改")])],1)],1):e._e()],1)},s=[],n=i("2f62"),r={name:"index",props:{id:{type:Number,default:0}},watch:{id(e){e?this.search():this.item=null}},data(){return{loading:!1,item:null}},methods:{init(){this.id?this.search():this.item=null},async search(){this.loading=!0;const e=await this.$request.fetchUser({id:this.id});if(e.code)return this.item=null,this.$message.warning(e.message),void(this.loading=!1);this.item=e.data,this.loading=!1},async edit(){const e=await this.$request.fetchUpdUser(this.item);e.code?this.$message.warning(e.message):this.$message.success(e.message)}},computed:{...Object(n["e"])(["dict"])}},l=r,o=i("2877"),c=Object(o["a"])(l,a,s,!1,null,null,null);t["a"]=c.exports},"58f6":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("el-row",[i("el-collapse-transition",[i("el-card",{directives:[{name:"show",rawName:"v-show",value:e.searchShow,expression:"searchShow"}],attrs:{shadow:"never"}},[i("el-form",{ref:"form",attrs:{inline:"",model:e.req,"label-position":"left","label-suffix":":",size:"mini"}},[i("el-form-item",{attrs:{label:"用户ID",prop:"userId"}},[i("el-input-number",{attrs:{placeholder:"用户ID",clearable:"","controls-position":"right",min:0,"step-strictly":!0},model:{value:e.req.userId,callback:function(t){e.$set(e.req,"userId",t)},expression:"req.userId"}})],1),i("el-form-item",{attrs:{label:"文章ID",prop:"articleId"}},[i("el-input-number",{attrs:{placeholder:"文章ID",clearable:"","controls-position":"right",min:0,"step-strictly":!0},model:{value:e.req.articleId,callback:function(t){e.$set(e.req,"articleId",t)},expression:"req.articleId"}})],1),i("el-form-item",{attrs:{label:"昵称",prop:"nickName"}},[i("el-input",{attrs:{placeholder:"昵称",clearable:"",maxlength:"50","show-word-limit":""},model:{value:e.req.nickName,callback:function(t){e.$set(e.req,"nickName",t)},expression:"req.nickName"}})],1),i("el-form-item",{attrs:{label:"状态",prop:"state"}},[i("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.req.state,callback:function(t){e.$set(e.req,"state",t)},expression:"req.state"}},e._l(e.dict.comment.state,(function(e){return i("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1),i("el-form-item",{attrs:{label:"时间范围",prop:"range"}},[i("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.handlerDaterange},model:{value:e.req.range,callback:function(t){e.$set(e.req,"range",t)},expression:"req.range"}})],1),i("br"),i("el-form-item",[i("el-button",{attrs:{type:"primary",plain:""},on:{click:e.search}},[e._v("搜索")]),i("el-button",{attrs:{plain:""},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)],1)],1),i("el-row",[i("el-card",{attrs:{shadow:"never"}},[e._l(e.items,(function(t,a){return i("Comment",{key:a,scopedSlots:e._u([{key:"avatar",fn:function(){return[i("el-avatar",{staticClass:"u-cursor",attrs:{size:45,src:t.userExt.a},nativeOn:{click:function(i){return e.handlerEdit(t.userId)}}})]},proxy:!0},{key:"info",fn:function(){return[i("el-link",{attrs:{underline:!1,href:t.userExt.u,target:"_blank"}},[e._v(e._s(t.userExt.n))]),i("br"),i("span",{staticStyle:{"margin-top":"4px","font-size":"12px"}},[e._v("("+e._s(t.userId)+")")])]},proxy:!0},{key:"title",fn:function(){return[i("span",{staticClass:"el-icon-document"},[e._v("[ID:"+e._s(t.articleId)+"]")]),i("span",[e._v(e._s(t.userExt.t))])]},proxy:!0},{key:"ext",fn:function(){return[2!==t.state?i("el-link",{attrs:{underline:!1,icon:"el-icon-finished"},on:{click:function(i){return e.edit(t,2)}}},[e._v("正常")]):e._e(),3!==t.state?i("el-link",{staticStyle:{"margin-left":"10px"},attrs:{underline:!1,icon:"el-icon-remove-outline"},on:{click:function(i){return e.edit(t,3)}}},[e._v("禁用")]):e._e()]},proxy:!0},{key:"content",fn:function(){return[t.atUserId?i("blockquote",{staticClass:"u-row-1"},[e._v(" @"),i("el-link",{attrs:{underline:!1},on:{click:function(i){return e.handlerEdit(t.atUserId)}}},[e._v(e._s(t.atUserExt.n)+"("+e._s(t.atUserId)+")")]),e._v("："+e._s(t.atUserExt.c)+" ")],1):e._e(),i("p",[e._v(e._s(t.content))])]},proxy:!0},{key:"footer",fn:function(){return[i("el-badge",{attrs:{"is-dot":"",type:e.dict.comment.state.find((function(e){return e.key==t.state})).color}},[e._v(" "+e._s(e.dict.comment.state.find((function(e){return e.key==t.state})).value)+" ")]),i("el-divider",{attrs:{direction:"vertical"}}),i("span",{staticClass:"el-icon-time"},[i("Time",{attrs:{time:t.createdAt}})],1)]},proxy:!0}],null,!0)})})),i("br"),i("el-pagination",{attrs:{background:"","page-sizes":[5,10,15,20,25,30,50],layout:"total, sizes, prev, pager, next, jumper","current-page":e.page.pageNum,"page-size":e.page.pageSize,total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],2)],1),i("el-dialog",{attrs:{title:"编辑用户",width:"350px",visible:e.dialogUserVisible},on:{"update:visible":function(t){e.dialogUserVisible=t},close:e.handlerDialogClose}},[i("User",{attrs:{id:e.userId}})],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"u-comment"},[i("div",{staticClass:"u-user"},[i("div",{staticClass:"u-avatar"},[e._t("avatar")],2),i("div",{staticClass:"u-user-info"},[e._t("info")],2)]),i("div",{staticClass:"u-comment__container"},[i("div",{staticClass:"u-comment__header"},[i("div",{staticClass:"u-comment--left"},[e._t("title")],2),i("div",{staticClass:"u-comment--right"},[e._t("ext")],2)]),i("div",{staticClass:"u-comment__content"},[e._t("content")],2),i("div",{staticClass:"u-comment__footer"},[e._t("footer")],2)])])},r=[],l={name:"index",data(){return{}},methods:{}},o=l,c=i("2877"),u=Object(c["a"])(o,n,r,!1,null,null,null),d=u.exports,m=i("7d9c"),h=i("345a"),p=i("2f62"),g={name:"index",components:{Comment:d,Time:m["a"],User:h["a"]},data(){return{loading:!1,searchShow:!0,dialogUserVisible:!1,userId:null,pickerOptions:{shortcuts:[{text:"最近一周",onClick(e){const t=new Date,i=new Date;i.setTime(i.getTime()-6048e5),e.$emit("pick",[i,t])}},{text:"最近一个月",onClick(e){const t=new Date,i=new Date;i.setTime(i.getTime()-2592e6),e.$emit("pick",[i,t])}},{text:"最近三个月",onClick(e){const t=new Date,i=new Date;i.setTime(i.getTime()-7776e6),e.$emit("pick",[i,t])}}]},page:{pageNum:1,pageSize:5,total:0},req:{userId:null,articleId:null,nickName:"",state:null,range:null,start:null,end:null},items:[]}},methods:{init(){this.search()},async search(){this.loading=!0;const e={...this.req,...this.page},t=await this.$request.fetchComments(e);if(t.code)return this.items=[],this.$message.warning(t.message),void(this.loading=!1);this.items=t.data.list,Object.assign(this.page,t.data.page),this.loading=!1},reset(){this.$refs.form.resetFields()},async edit(e,t){const i=await this.$request.fetchUpdComment({id:e.id,state:t});i.code?this.$message.warning(i.message):(this.$message.success(i.message),this.search())},handleSizeChange(e){this.page.pageSize=e,this.page.pageNum=1,this.search()},handleCurrentChange(e){this.page.pageNum=e,this.search()},handlerDaterange(e){if(!e)return this.req.start=0,void(this.req.end=0);const[t,i]=e;this.req.start=+t,this.req.end=+i},handlerEdit(e){this.dialogUserVisible=!0,this.userId=e},handlerDialogClose(){this.userId=0}},computed:{...Object(p["e"])(["dict"])}},f=g,v=Object(c["a"])(f,a,s,!1,null,null,null);t["default"]=v.exports},"7d9c":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{on:{click:e.handleClick}},[e._v(e._s(e.date))])},s=[];const n=(e,t)=>e<=t,r=e=>e<10?"0"+e:e,l=(e,t)=>{const i=new Date(e),a=i.getFullYear(),s=r(i.getMonth()+1),n=r(i.getDate()),l=r(i.getHours()),o=r(i.getMinutes()),c=r(i.getSeconds());let u="";return u="year"===t?a+"-"+s+"-"+n+" "+l+":"+o+":"+c:s+"-"+n+" "+l+":"+o,u},o=(e,t)=>{const i=(new Date).getTime(),a=n(e,i);let s=i-e;a||(s=-s);let r="";const o=a?t("i.time.before")||"前":t("i.time.after")||"后";return r=s<1e3?t("i.time.just")||"刚刚":s<6e4?parseInt(s/1e3)+(t("i.time.seconds")||"秒")+o:s>=6e4&&s<36e5?Math.floor(s/6e4)+(t("i.time.minutes")||"分钟")+o:s>=36e5&&s<864e5?Math.floor(s/36e5)+(t("i.time.hours")||"小时")+o:s>=864e5&&s<262386e4?Math.floor(s/864e5)+(t("i.time.days")||"天")+o:s>=262386e4&&s<=3156786e4&&a?l(e):l(e,"year"),r};var c=function(e,t){return o(e,t)};const u=function(e,t){for(let i=0;i<t.length;i++)if(e===t[i])return!0;return!1},d=function(e,t){};var m={name:"Time",props:{time:{type:[Number,Date,String],required:!0},type:{type:String,validator(e){return u(e,["relative","date","datetime"])},default:"relative"},hash:{type:String,default:""},interval:{type:Number,default:60}},data(){return{date:""}},watch:{time(){this.setTime()}},methods:{handleClick(){""!==this.hash&&(window.location.hash=this.hash)},setTime(){const e=typeof this.time;let t;if("number"===e){const e=this.time.toString().length>10?this.time:1e3*this.time;t=new Date(e).getTime()}else"object"===e?t=this.time.getTime():"string"===e&&(t=new Date(this.time).getTime());if("relative"===this.type)this.date=c(t,d);else{const e=new Date(this.time),t=e.getFullYear(),i=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,a=e.getDate()<10?"0"+e.getDate():e.getDate(),s=e.getHours()<10?"0"+e.getHours():e.getHours(),n=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),r=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();"datetime"===this.type?this.date=`${t}-${i}-${a} ${s}:${n}:${r}`:"date"===this.type&&(this.date=`${t}-${i}-${a}`)}}},mounted(){this.setTime(),this.timer=setInterval(()=>{this.setTime()},1e3*this.interval)},beforeDestroy(){this.timer&&clearInterval(this.timer)}},h=m,p=i("2877"),g=Object(p["a"])(h,a,s,!1,null,null,null);t["a"]=g.exports}}]);
//# sourceMappingURL=chunk-7ab11e5a.4ab32c08.js.map