(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a85ab70"],{"345a":function(e,t,l){"use strict";var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"u-user"},[e.item?l("el-form",{attrs:{"label-position":"left","label-suffix":":","label-width":"100px"}},[l("el-form-item",{attrs:{label:"ID"}},[l("span",[e._v(e._s(e.item.id))])]),l("el-form-item",{attrs:{label:"账号"}},[l("span",[e._v(e._s(e.item.account))])]),l("el-form-item",{attrs:{label:"昵称"}},[l("span",[e._v(e._s(e.item.nickName))])]),l("el-form-item",{attrs:{label:"身份"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.item.identity,callback:function(t){e.$set(e.item,"identity",t)},expression:"item.identity"}},e._l(e.dict.user.identity,(function(e){return l("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1),l("el-form-item",{attrs:{label:"状态"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.item.state,callback:function(t){e.$set(e.item,"state",t)},expression:"item.state"}},e._l(e.dict.user.state,(function(e){return l("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1),l("el-form-item",{attrs:{label:"个人网站"}},[l("el-input",{attrs:{type:"url",placeholder:"个人网站",clearable:"",maxlength:"200","show-word-limit":""},model:{value:e.item.url,callback:function(t){e.$set(e.item,"url",t)},expression:"item.url"}})],1),l("el-form-item",[l("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:e.edit}},[e._v("修改")])],1)],1):e._e()],1)},n=[],i=l("2f62"),o={name:"index",props:{id:{type:Number,default:0}},watch:{id(e){e?this.search():this.item=null}},data(){return{loading:!1,item:null}},methods:{init(){this.id?this.search():this.item=null},async search(){this.loading=!0;const e=await this.$request.fetchUser({id:this.id});if(e.code)return this.item=null,this.$message.warning(e.message),void(this.loading=!1);this.item=e.data,this.loading=!1},async edit(){const e=await this.$request.fetchUpdUser(this.item);e.code?this.$message.warning(e.message):this.$message.success(e.message)}},computed:{...Object(i["e"])(["dict"])}},r=o,s=l("2877"),c=Object(s["a"])(r,a,n,!1,null,null,null);t["a"]=c.exports},"7d9c":function(e,t,l){"use strict";var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("span",{on:{click:e.handleClick}},[e._v(e._s(e.date))])},n=[];const i=(e,t)=>e<=t,o=e=>e<10?"0"+e:e,r=(e,t)=>{const l=new Date(e),a=l.getFullYear(),n=o(l.getMonth()+1),i=o(l.getDate()),r=o(l.getHours()),s=o(l.getMinutes()),c=o(l.getSeconds());let u="";return u="year"===t?a+"-"+n+"-"+i+" "+r+":"+s+":"+c:n+"-"+i+" "+r+":"+s,u},s=(e,t)=>{const l=(new Date).getTime(),a=i(e,l);let n=l-e;a||(n=-n);let o="";const s=a?t("i.time.before")||"前":t("i.time.after")||"后";return o=n<1e3?t("i.time.just")||"刚刚":n<6e4?parseInt(n/1e3)+(t("i.time.seconds")||"秒")+s:n>=6e4&&n<36e5?Math.floor(n/6e4)+(t("i.time.minutes")||"分钟")+s:n>=36e5&&n<864e5?Math.floor(n/36e5)+(t("i.time.hours")||"小时")+s:n>=864e5&&n<262386e4?Math.floor(n/864e5)+(t("i.time.days")||"天")+s:n>=262386e4&&n<=3156786e4&&a?r(e):r(e,"year"),o};var c=function(e,t){return s(e,t)};const u=function(e,t){for(let l=0;l<t.length;l++)if(e===t[l])return!0;return!1},m=function(e,t){};var d={name:"Time",props:{time:{type:[Number,Date,String],required:!0},type:{type:String,validator(e){return u(e,["relative","date","datetime"])},default:"relative"},hash:{type:String,default:""},interval:{type:Number,default:60}},data(){return{date:""}},watch:{time(){this.setTime()}},methods:{handleClick(){""!==this.hash&&(window.location.hash=this.hash)},setTime(){const e=typeof this.time;let t;if("number"===e){const e=this.time.toString().length>10?this.time:1e3*this.time;t=new Date(e).getTime()}else"object"===e?t=this.time.getTime():"string"===e&&(t=new Date(this.time).getTime());if("relative"===this.type)this.date=c(t,m);else{const e=new Date(this.time),t=e.getFullYear(),l=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,a=e.getDate()<10?"0"+e.getDate():e.getDate(),n=e.getHours()<10?"0"+e.getHours():e.getHours(),i=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),o=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();"datetime"===this.type?this.date=`${t}-${l}-${a} ${n}:${i}:${o}`:"date"===this.type&&(this.date=`${t}-${l}-${a}`)}}},mounted(){this.setTime(),this.timer=setInterval(()=>{this.setTime()},1e3*this.interval)},beforeDestroy(){this.timer&&clearInterval(this.timer)}},h=d,p=l("2877"),b=Object(p["a"])(h,a,n,!1,null,null,null);t["a"]=b.exports},e382:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[l("el-row",[l("el-collapse-transition",[l("el-card",{directives:[{name:"show",rawName:"v-show",value:e.searchShow,expression:"searchShow"}],attrs:{shadow:"never"}},[l("el-form",{ref:"form",attrs:{inline:"",model:e.req,"label-position":"left","label-suffix":":",size:"mini"}},[l("el-form-item",{attrs:{label:"主键",prop:"id"}},[l("el-input-number",{attrs:{placeholder:"主键",clearable:"","controls-position":"right",min:0,"step-strictly":!0},model:{value:e.req.id,callback:function(t){e.$set(e.req,"id",t)},expression:"req.id"}})],1),l("el-form-item",{attrs:{label:"账号",prop:"account"}},[l("el-input",{attrs:{placeholder:"账号",clearable:"",maxlength:"25","show-word-limit":""},model:{value:e.req.account,callback:function(t){e.$set(e.req,"account",t)},expression:"req.account"}})],1),l("el-form-item",{attrs:{label:"昵称",prop:"nickName"}},[l("el-input",{attrs:{placeholder:"昵称",clearable:"",maxlength:"50","show-word-limit":""},model:{value:e.req.nickName,callback:function(t){e.$set(e.req,"nickName",t)},expression:"req.nickName"}})],1),l("el-form-item",{attrs:{label:"身份",prop:"identity"}},[l("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.req.identity,callback:function(t){e.$set(e.req,"identity",t)},expression:"req.identity"}},e._l(e.dict.user.identity,(function(e){return l("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1),l("el-form-item",{attrs:{label:"状态",prop:"state"}},[l("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.req.state,callback:function(t){e.$set(e.req,"state",t)},expression:"req.state"}},e._l(e.dict.user.state,(function(e){return l("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1),l("el-form-item",{attrs:{label:"时间范围",prop:"range"}},[l("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.handlerDaterange},model:{value:e.req.range,callback:function(t){e.$set(e.req,"range",t)},expression:"req.range"}})],1),l("br"),l("el-form-item",[l("el-button",{attrs:{type:"primary",plain:""},on:{click:e.search}},[e._v("搜索")]),l("el-button",{attrs:{plain:""},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)],1)],1),l("el-row",[l("el-card",{attrs:{shadow:"never"}},[l("el-table",{attrs:{resizable:"",data:e.items,fit:!1}},[l("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-form",{attrs:{"label-position":"right","label-suffix":":","label-width":"100px"}},[t.row.avatar&&t.row.avatar?l("el-form-item",[l("span",{staticClass:"u-item-label",attrs:{slot:"label"},slot:"label"},[e._v("头像地址:")]),l("span",{staticStyle:{"margin-right":"5px"}},[e._v(e._s(t.row.avatar))]),l("el-link",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.row.avatar,expression:"scope.row.avatar",arg:"copy"}],attrs:{underline:!1,icon:"el-icon-document-copy"}})],1):e._e(),t.row.bio&&t.row.bio?l("el-form-item",[l("span",{staticClass:"u-item-label",attrs:{slot:"label"},slot:"label"},[e._v("个性签名:")]),l("span",{staticStyle:{"margin-right":"5px"}},[e._v(e._s(t.row.bio))]),l("el-link",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.row.bio,expression:"scope.row.bio",arg:"copy"}],attrs:{underline:!1,icon:"el-icon-document-copy"}})],1):e._e(),t.row.url&&t.row.url.length?l("el-form-item",[l("span",{staticClass:"u-item-label",attrs:{slot:"label"},slot:"label"},[e._v("个人网站:")]),l("span",{staticStyle:{"margin-right":"5px"}},[e._v(e._s(t.row.url))]),l("el-link",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.row.url,expression:"scope.row.url",arg:"copy"}],attrs:{underline:!1,icon:"el-icon-document-copy"}})],1):e._e(),l("el-form-item",[l("span",{staticClass:"u-item-label",attrs:{slot:"label"},slot:"label"},[e._v("最近访问IP:")]),l("span",{staticStyle:{"margin-right":"5px"}},[e._v(e._s(t.row.ip))]),l("el-link",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.row.ip,expression:"scope.row.ip",arg:"copy"}],attrs:{underline:!1,icon:"el-icon-document-copy"}})],1)],1)]}}])}),e.columnShow.index?l("el-table-column",{attrs:{type:"index",label:"序号"}}):e._e(),e.columnShow.avatar?l("el-table-column",{attrs:{prop:"avatar",label:"头像"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.avatar&&t.row.avatar.length?l("el-avatar",{attrs:{size:"medium",src:t.row.avatar}}):l("span",[e._v("暂无")])]}}],null,!1,779320806)}):e._e(),e.columnShow.id?l("el-table-column",{attrs:{prop:"id",label:"主键"}}):e._e(),e.columnShow.account?l("el-table-column",{attrs:{prop:"account",align:"center",label:"账号"}}):e._e(),e.columnShow.nickName?l("el-table-column",{attrs:{prop:"nickName",align:"center",label:"昵称"}}):e._e(),e.columnShow.source?l("el-table-column",{attrs:{prop:"source",align:"center",label:"来源"}}):e._e(),e.columnShow.url?l("el-table-column",{attrs:{prop:"url",align:"center",label:"个人网站"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.url&&t.row.url.length?l("el-link",{attrs:{icon:"el-icon-s-promotion",href:t.row.url,target:"_blank"}},[e._v("链接")]):l("span",[e._v("暂无")])]}}],null,!1,4154024193)}):e._e(),e.columnShow.identity?l("el-table-column",{attrs:{prop:"identity",align:"center",label:"身份"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-tag",{attrs:{type:e.dict.user.identity.find((function(e){return e.key==t.row.identity})).color}},[e._v(e._s(e.dict.user.identity.find((function(e){return e.key==t.row.identity})).value))])]}}],null,!1,2888927006)}):e._e(),e.columnShow.state?l("el-table-column",{attrs:{prop:"state",align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-tag",{attrs:{type:e.dict.user.state.find((function(e){return e.key==t.row.state})).color}},[e._v(e._s(e.dict.user.state.find((function(e){return e.key==t.row.state})).value))])]}}],null,!1,2386472094)}):e._e(),e.columnShow.lastAt?l("el-table-column",{attrs:{prop:"lastAt",align:"center",label:"最近访问"},scopedSlots:e._u([{key:"default",fn:function(e){return[l("span",[l("Time",{attrs:{time:e.row.lastAt}})],1)]}}],null,!1,1492877712)}):e._e(),e.columnShow.createdAt?l("el-table-column",{attrs:{prop:"createdAt",align:"center",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(e){return[l("span",[l("Time",{attrs:{type:"date",time:e.row.createdAt}})],1)]}}],null,!1,3509991200)}):e._e(),e.columnShow.updatedAt?l("el-table-column",{attrs:{prop:"updatedAt",align:"center",label:"修改时间"},scopedSlots:e._u([{key:"default",fn:function(e){return[l("span",[l("Time",{attrs:{type:"date",time:e.row.updatedAt}})],1)]}}],null,!1,1538028725)}):e._e(),l("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[l("el-tooltip",{attrs:{placement:"top",effect:"light"}},[l("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.searchShow?"隐藏搜索":"展开搜索"))]),l("el-button",{attrs:{type:"text",icon:"el-icon-search"},on:{click:e.handlerSearchShow}})],1),l("el-tooltip",{attrs:{placement:"top",effect:"light",content:"刷新"}},[l("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"text",icon:"el-icon-refresh"},on:{click:e.search}})],1),l("el-popover",{attrs:{width:60,placement:"bottom",title:"展示字段",trigger:"click"}},[l("div",[l("el-checkbox",{attrs:{indeterminate:e.indeterminate},on:{change:e.handleCheckAllChange},model:{value:e.columnShow.all,callback:function(t){e.$set(e.columnShow,"all",t)},expression:"columnShow.all"}},[e._v("全选")]),l("br"),l("el-checkbox",{attrs:{label:"序号"},model:{value:e.columnShow.index,callback:function(t){e.$set(e.columnShow,"index",t)},expression:"columnShow.index"}}),l("br"),l("el-checkbox",{attrs:{label:"头像"},model:{value:e.columnShow.avatar,callback:function(t){e.$set(e.columnShow,"avatar",t)},expression:"columnShow.avatar"}}),l("br"),l("el-checkbox",{attrs:{label:"主键"},model:{value:e.columnShow.id,callback:function(t){e.$set(e.columnShow,"id",t)},expression:"columnShow.id"}}),l("br"),l("el-checkbox",{attrs:{label:"账号"},model:{value:e.columnShow.account,callback:function(t){e.$set(e.columnShow,"account",t)},expression:"columnShow.account"}}),l("br"),l("el-checkbox",{attrs:{label:"昵称"},model:{value:e.columnShow.nickName,callback:function(t){e.$set(e.columnShow,"nickName",t)},expression:"columnShow.nickName"}}),l("br"),l("el-checkbox",{attrs:{label:"来源"},model:{value:e.columnShow.source,callback:function(t){e.$set(e.columnShow,"source",t)},expression:"columnShow.source"}}),l("br"),l("el-checkbox",{attrs:{label:"个人网站"},model:{value:e.columnShow.url,callback:function(t){e.$set(e.columnShow,"url",t)},expression:"columnShow.url"}}),l("br"),l("el-checkbox",{attrs:{label:"身份"},model:{value:e.columnShow.identity,callback:function(t){e.$set(e.columnShow,"identity",t)},expression:"columnShow.identity"}}),l("br"),l("el-checkbox",{attrs:{label:"状态"},model:{value:e.columnShow.state,callback:function(t){e.$set(e.columnShow,"state",t)},expression:"columnShow.state"}}),l("br"),l("el-checkbox",{attrs:{label:"最近访问"},model:{value:e.columnShow.lastAt,callback:function(t){e.$set(e.columnShow,"lastAt",t)},expression:"columnShow.lastAt"}}),l("br"),l("el-checkbox",{attrs:{label:"创建时间"},model:{value:e.columnShow.createdAt,callback:function(t){e.$set(e.columnShow,"createdAt",t)},expression:"columnShow.createdAt"}}),l("br"),l("el-checkbox",{attrs:{label:"更新时间"},model:{value:e.columnShow.updatedAt,callback:function(t){e.$set(e.columnShow,"updatedAt",t)},expression:"columnShow.updatedAt"}}),l("br")],1),l("el-button",{attrs:{slot:"reference",type:"text",icon:"el-icon-s-operation"},slot:"reference"})],1)]}},{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"primary",icon:"el-icon-edit",plain:"",size:"mini"},on:{click:function(l){return e.handlerEidt(t.row)}}},[e._v("编辑")])]}}])})],1),l("br"),l("el-pagination",{attrs:{background:"","page-sizes":[5,10,15,20,25,30,50],layout:"total, sizes, prev, pager, next, jumper","current-page":e.page.pageNum,"page-size":e.page.pageSize,total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),l("el-dialog",{attrs:{title:"编辑用户",width:"350px",visible:e.dialogUserVisible},on:{"update:visible":function(t){e.dialogUserVisible=t}}},[l("User",{attrs:{id:e.userId}})],1)],1)},n=[],i=l("7d9c"),o=l("345a"),r=l("2f62"),s={name:"index",components:{Time:i["a"],User:o["a"]},watch:{columnShow:{deep:!0,immediate:!0,handler(){this.handlerCheckChange()}}},data(){return{loading:!1,searchShow:!0,indeterminate:!1,dialogUserVisible:!1,userId:null,columnShow:{all:!1,index:!0,avatar:!0,id:!0,account:!0,nickName:!0,source:!0,url:!0,identity:!0,state:!0,lastAt:!0,createdAt:!0,updatedAt:!1},pickerOptions:{shortcuts:[{text:"最近一周",onClick(e){const t=new Date,l=new Date;l.setTime(l.getTime()-6048e5),e.$emit("pick",[l,t])}},{text:"最近一个月",onClick(e){const t=new Date,l=new Date;l.setTime(l.getTime()-2592e6),e.$emit("pick",[l,t])}},{text:"最近三个月",onClick(e){const t=new Date,l=new Date;l.setTime(l.getTime()-7776e6),e.$emit("pick",[l,t])}}]},page:{pageNum:1,pageSize:5,total:0},req:{id:null,account:"",nickName:"",identity:null,state:null,range:null,start:null,end:null},items:[]}},methods:{init(){this.search()},async search(){this.loading=!0;const e={...this.req,...this.page},t=await this.$request.fetchUsers(e);if(t.code)return this.items=[],this.$message.warning(t.message),void(this.loading=!1);this.items=t.data.list,Object.assign(this.page,t.data.page),this.loading=!1},reset(){this.$refs.form.resetFields()},handleSizeChange(e){this.page.pageSize=e,this.page.pageNum=1,this.search()},handleCurrentChange(e){this.page.pageNum=e,this.search()},handleCheckAllChange(e){for(const t in this.columnShow)this.columnShow[t]=e;this.handlerCheckChange()},handlerCheckChange(){let e=!0;for(const t in this.columnShow)"all"!==t&&(this.columnShow[t]||(e=!1));if(e)return this.columnShow.all=!0,void(this.indeterminate=!1);this.columnShow.all=!1,this.indeterminate=!0},handlerSearchShow(){this.searchShow=!this.searchShow},handlerEidt(e){this.userId=e.id,this.dialogUserVisible=!0},handlerDaterange(e){if(!e)return this.req.start=0,void(this.req.end=0);const[t,l]=e;this.req.start=+t,this.req.end=+l}},computed:{...Object(r["e"])(["dict"])}},c=s,u=l("2877"),m=Object(u["a"])(c,a,n,!1,null,null,null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-7a85ab70.61e87943.js.map